{% extends 'base.html' %}

{% block content %}

<div class="container">
    {% with messages = get_flashed_messages(with_categories = true) %}
        {% if messages %}
            {% for cat, msg in messages %}
                {% if cat == 'auth-success' %}
                <div class="alert alert-warning alert-dismissible fade show login-notification" role="alert">
                    <strong>Success!</strong> You've logged into your account. Enjoy!
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                  </div>
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endwith %} 
</div>

<header class="hero-section">
    <h3 class="search-header-title">Search</h3>
    <h3 class= "search-header-text">for your next meal</h3>
</header>


<!-- <div class="container">
    <ul class="list-group">
        <li class="list-group-item">Email: {{ current_user.email }}</li>
        <li class="list-group-item">Token: {{ current_user.token }}</li>
        <a href = "#" id="sourceLink"></a>
    </ul>
</div>  -->


<!-- <h1 class="pt-5 pb-2">List of nutrition info</h1> -->

      <!-- <p class="lead alert alert-warning">Here is a list of recipes for this week</p> -->
    <div class="searchbar">
        {% include 'searchform.html' %}
    </div>

        <!-- {% if data %}
        <div>there is data</div>
        {% else %}
        <div>no data</div>
        {% endif %} -->

        <div class="search-middle-content">

            
            {% for recipe in data %}
            <div class="card recipe-cards">
                {% if recipe.image %}
                {% set imageLink = [imglink, recipe.image] %}
                <img class="card-img-top" src="{{ imageLink|join('') }}" alt="Card image cap">
                {% endif %}
                <h5 class="card-header recipe-title">{{recipe.title}}</h5>
                <div class="card-body recipe-body">
                    <h5 class="card-title readyin">Ready in {{recipe.readyInMinutes}} minutes</h5>
                    <p class="card-text">serving size: {{ recipe.servings }}</p>
                    <div class="search-btns">
                        <button class="btn btn-outline-warning btn-block getRecipe"><a href="{{recipe.sourceUrl}}">Get Recipe</a></button>
                    </div>
                </div>
              </div>
            {% endfor %}  
              
{% endblock content %}